@using BookShop.BLL.ConfigurationModel.ProductModel;
@{
	ViewData["Title"] = "Home Page";
	List<ProductViewModel> products = ViewBag.Products;
}
<Style>
	.carousel-item img {
		border-radius: 10px
	}

	.c {
		margin-top: 10px
	}

	* {
		margin: 0px;
		padding: 0px;
	}

	.i img {
		height: 153px;
		border-radius: 10px
	}

	.ai {
		margin-top: 20px;
	}

	img {
		width: 100%;
	}


	.outstock-container {
		background: rgba(0,0,0,0.3);
		height: 100%;
		width: 100%;
		top: 0;
		left: 0;
		position: absolute;
		justify-content: center;
		align-items: center;
		display: flex;
	}


	.new-label-pro-sale {
		background-color: #F7941E;
		width: 44px;
		height: 44px;
		border-radius: 22px;
		display: flex;
		justify-content: center;
		align-items: center;
		position: absolute;
		top: 10px;
		right: 10px;
		margin-top: 0px !important;
		z-index: 1;
	}

	.giaban {
		font-weight: 700;
		color: #C92127;
		font-size: 30px;
	}

	.giagoc {
		color: rgb(189, 189, 189);
		text-decoration-line: line-through;
	}

	.fsale {
		margin: 5px;
	}

	.progress-value {
		margin-top: 20px;
		right: 0;
		left: 0;
		top: 0;
		bottom: 0;
		color: #ffffff;
		background-color: rgb(191, 0, 45);
		font-size: 1em;
		text-align: center;
		font-weight: 700;
		border-radius: 20px
	}

	.xemthem {
		margin: auto;
		width: 200px;
		height: 35px;
		text-align: center;
		border-radius: 20px;
		box-shadow: 2px 3px 5px #ccc;
		background-image: linear-gradient(to right, #ff9800, #F7695D);
	}

		.xemthem p {
			padding-top: 5px;
			color: white;
		}

	.flashsale {
		margin-top: 0px;
		background-color: white;
		padding-bottom: 30px
	}

	.danhmucsanpham {
		margin-top: 24px;
		background-color: white;
		border-radius: 10px;
		overflow-y: auto;
	}

		.danhmucsanpham hr {
			font-weight: 200;
		}

	.fhs_center_center {
		text-align: center;
		color: black;
	}

		.fhs_center_center:hover {
			color: red;
			text-decoration: none;
		}

	.dm svg {
		margin-top: 7px;
		margin-right: 10px
	}

	.xuhuong {
		margin-top: 24px;
	}

	.xh {
		display: flex;
	}

		.xh h2 {
			margin-left: 10px;
			margin-top: 12px;
			font-weight: 700;
			font-size: 20px;
		}

	.hg:hover {
		border-color: chocolate;
		color: chocolate;
	}
	/* Tab Links */
	.tabs {
		display: flex;
		background-color: white;
	}

	.tablinks {
		margin: 5px;
		background-color: white;
		border: none;
		outline: none;
		cursor: pointer;
		width: 100%;
		padding: 1rem;
		font-size: 13px;
		text-transform: uppercase;
		font-weight: 600;
		transition: 0.2s ease;
	}

		.tablinks:hover {
			color: rgb(250, 121, 0);
			border: 3px solid rgb(250, 121, 0);
			border-radius: 10px;
		}
		/* Tab active */
		.tablinks.active {
			color: rgb(250, 121, 0);
			border: 1px solid rgb(250, 121, 0);
			border-radius: 10px;
		}

	/* tab content */
	.tabcontent {
		display: none;
	}
		/* Text*/
		.tabcontent p {
			color: #333;
			font-size: 16px;
		}
		/* tab content active */
		.tabcontent.active {
			display: block;
		}

	.cms-icon-menu {
		margin: 15px 0px 15px 0px;
		background-color: #fff;
		text-align: center;
		padding: 15px 4px !important;
	}

	.dss {
		width: 10%;
		margin: 0px;
		padding: 0px;
	}

		.dss img {
			width: 40%;
		}

	.cms-icon-menu-item-name {
		padding: 10px 10px 0px;
	}

	.testsp {
		position: relative;
		padding: 5px;
		font-size: 12px;
		cursor: pointer;
	}

	.giaban p {
		font-size: 14px;

		.giaban p:nth-child(2) {
			color: #c4c3be;
			text-decoration: line-through;
		}

	.giaban {
		display: flex;
		justify-content: space-between;
	}

	.listdsds {
		overflow-y: auto;
	}

	.flashsale-header {
		background-color: #FCDAB0;
	}


	.danhmuc-sach {
		gap: 10px;
		padding: 0 10px;
		display: grid;
		grid-template-columns: repeat(5,1fr);
	}

		.danhmuc-sach .ttsp h4 {
			font-size: 14px;
		}

		.danhmuc-sach .giaban {
			font-size: 16px;
			color: #C92127;
		}

		.danhmuc-sach .testsp:hover {
			box-shadow: 0px 0px 4px 2px rgba(0,0,0,0.1);
		}

	.flashsale-image-container {
		margin-bottom: 20px;
		text-align: center;
	}

	.fa-solid.fa-eye {
		margin-left: 20px;
	}

	.km-sp {
		justify-content: center;
		flex-direction: column;
		text-align: center;
		display: flex;
		height: 50px;
		width: 50px;
		color: white;
		border-radius: 25px;
		right: -5px;
		position: absolute;
		top: -10px;
		background-color: #C92127;
	}

	.nuoidaycon .testsp:nth-child(1) {
		grid-row: 1/3;
		grid-column: 1/3;
		gap: 20px;
	}

	.dm {
		justify-content: center;
		margin-bottom: 20px;
		background-color: #FCDDEF;
	}

		.dm span {
			margin-left: 20px;
			font-weight: 600;
			font-size: 28px;
		}

	.giabandau {
		color: #DCDCDC;
		text-decoration: line-through;
	}
	.giabandau{
		color:#DCDCDC;
		text-decoration: line-through;
	}
</Style>
<div class="row">
	<div class="col-sm-8">
		<div id="carouselExampleFade" class="carousel slide carousel-fade" data-ride="carousel">
			<div class="carousel-inner">
				<div class="carousel-item active">
					<img style="height:316px" src="https://cdn0.fahasa.com/media/magentothem/banner7/20_11_mainbanner_Slide_840x320.jpg" class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img style="height:316px" src="https://cdn0.fahasa.com/media/magentothem/banner7/DochoiT1123_BannerSlide_840x320.jpg" class="d-block w-100" alt="...">
				</div>
				<div class="carousel-item">
					<img style="height:316px" src="https://cdn0.fahasa.com/media/magentothem/banner7/FahasaSaleThu3T1123_W1_Banner_840x320.jpg" class="d-block w-100" alt="...">
				</div>
			</div>
			<button class="carousel-control-prev" type="button" data-target="#carouselExampleFade" data-slide="prev">
				<span class="carousel-control-prev-icon" aria-hidden="true"></span>
				<span class="sr-only">Previous</span>
			</button>
			<button class="carousel-control-next" type="button" data-target="#carouselExampleFade" data-slide="next">
				<span class="carousel-control-next-icon" aria-hidden="true"></span>
				<span class="sr-only">Next</span>
			</button>
		</div>
	</div>
	<div class="col-sm-4">
		<div class="i">
			<a href="pnj-fhs?fhs_campaign=homepage_subbanner_1"><img width="100%" class="border_radius_normal" src="https://cdn0.fahasa.com/media/wysiwyg/Thang-11-2023/ZaloPay11_392x156_1.jpg"></a>
		</div>
		<div class="i c">
			<a href="vnpay?fhs_campaign=homepage_subbanner_2"><img width="100%" class="border_radius_normal" src="https://cdn0.fahasa.com/media/wysiwyg/Thang-10-2023/VNPAYFHS20_392x156_1.jpg"></a>
		</div>
	</div>
</div>
<div class="row ai">
	<div class="col-sm-3">
		<img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-11-2023/NCCThienLongT1123_BannerSmallBanner_310x210_1.png" width="100%" height="100%" />
	</div>
	<div class="col-sm-3">
		<img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-11-2023/TrangThieuNhiT923_Banner_SmallBanner_310x210-22_1.png" width="100%" height="100%" />
	</div>
	<div class="col-sm-3">
		<img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-11-2023/PopmartT1023_Banner_SmallBanner_310x210_4.png" width="100%" height="100%" />
	</div>
	<div class="col-sm-3">
		<img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-11-2023/FahasaSaleThu3T1123_W1_Smallbanner_310x210_4.png" width="100%" height="100%" />
	</div>
</div>

<div class="row cms-icon-menu listdsds">
	<div class="dss">
		<div>
			<a asp-area="" asp-controller="Home" asp-action="ThongTinSanPham"><img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-07-2023/Icon_B2S_1.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Trở Lại<br>Trường Học</div>
	</div>
	<div class="dss">
		<div>
			<a href="/sale-thu-3?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-09-2023/F3Thang9_120x120.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Sale Thứ 3</div>
	</div>
	<div class="dss">
		<div>
			<a href="/flashsale?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/Icon_FlashSale_Thuong_120x120.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Flash Sale</div>
	</div>
	<div class="dss">
		<div>
			<a href="/ma-giam-gia-hot?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/Icon_MaGiamGia_8px_1.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Mã Giảm Giá</div>
	</div>
	<div class="dss">
		<div>
			<a href="/do-choi-trung-thu?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/IconDoChoi_Thuong_120x120.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Đồ Chơi</div>
	</div>
	<div class="dss">
		<div>
			<a href="/binh-tay?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-09-2023/Icon_NCC_BinhTayT9.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Bình Tây</div>
	</div>
	<div class="dss">
		<div>
			<a href="/trang-thieu-nhi?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/Thang-09-2023/Icon_ThieuNhi_Thuong_120x120.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Thiếu Nhi</div>
	</div>
	<div class="dss">
		<div>
			<a href="/new-product?category=all&amp;sort=created_at&amp;fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/Icon_SanPhamMoi_8px_1.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Sản Phẩm <br>Mới</div>
	</div>
	<div class="dss">
		<div>
			<a href="/nhap-hoi-manga-comic?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/Manga_Week_Hot.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Manga</div>
	</div>
	<div class="dss">
		<div>
			<a href="/phien-cho-do-cu?fhs_campaign=homepageicon"><img src="https://cdn0.fahasa.com/media/wysiwyg/icon-menu/Icon_PhienChoCu_8px_1.png" class="center"></a>
		</div>
		<div class="cms-icon-menu-item-name">Phiên Chợ<br>Sách cũ</div>
	</div>
</div>

<!-- Danh muc flashsale -->
<div class="flashsale">
	<div class="flashsale-header">
		<div class="col-12">
			<p style="justify-content:center; display:flex; align-items: center;font-size:25px; font-weight: 700; color: black; height:50px">Sản phẩm bày bán</p>
		</div>
	</div>
	<div class="danhmuc-sach" id="listproduct">
	</div>

	<div class="xemthem">
		<p>Xem Thêm</p>
	</div>
</div>

<!-- Danh Muc San Pham-->
<div class="danhmucsanpham">
	<div class="dm" style="display:flex;">
		<span>Cổ điển</span>
	</div>

	<div class="listsanpham">
		<div class="danhmuc-sach" id="listcategory">
		</div>
	</div>

</div>
<div class="danhmucsanpham">
	<div class="dm" style="display:flex;">
		<span>Nuôi dạy con</span>
	</div>

	<div class="nuoidaycon">
		<div class="danhmuc-sach" id="listnuoidaycon">
		</div>
	</div>

</div>



<script src="~/js/site.js"></script>

<script>
	function ThemVaoDanhSachYeuThich(id) {
		var url = "@Url.Action("ThemVaoYeuThich", "Home")?id=" + id;
		$.ajax({
			url: url,
			success: function (data) {
				if (data.success === true) {
					console.log(data.success);
					alert("Đã thêm sản phẩm vào yêu thích");
				} else {
					alert("Sản phẩm này đã có trong mục yêu thích");

				}
			},
			error: function () {
				console.log("AJAX request failed");
			}
		});
	}
	/*danh mục */
	$(document).ready(function () {
		$.ajax({
			url: '@Url.Action("SachMoi", "Home")',
			type: 'GET',
			success: function (data) {
				console.log(data);
				var listcategory = $("#listcategory");
				listcategory.empty();
				data.data.forEach(function (item) {
					var categoryRow =
						'<div class="testsp" onclick="ChiTietSanPham(' + item.id + ')">' +
						'<div class="product-image">' +
						'<div class="flashsale-image-container">' +
						'<img src="' + item.imgUrl + '">' +
						'</div>' +
						'</div>' +
						'<div class="ttsp">' +
						'<h4>' + item.name + '</h4>' +
						'</div>' +
						'<div class="giaban">' + '<p>' +
						formatPrice(item.newPrice) + '</p>';
					if (item.saleoff > 0) {
						categoryRow += '<div class="km-sp">' + item.saleoff + "%" + '</div>' +
							'<div class="giabandau">' +
							'<div>' + '<p>' + formatPrice(item.price) + '</p>' + '</div>' +
							'</div>';
					}

					listcategory.append(categoryRow);
				});
			},
			error: function (error) {
				console.log(error);
			}
		});
	});

	$(document).ready(function () {
		$.ajax({
			url: '@Url.Action("NuoiDayCon", "Home")',
			type: 'GET',
			success: function (data) {
				console.log(data);
				var listcategory = $("#listnuoidaycon");
				listcategory.empty();
				data.data.forEach(function (item) {
					var categoryRow =
						'<div class="testsp" onclick="ChiTietSanPham(' + item.id + ')">' +
						'<div class="product-image">' +
						'<div class="flashsale-image-container">' +
						'<img src="' + item.imgUrl + '">' +
						'</div>' +
						'</div>' +
						'<div class="ttsp">' +
						'<h4>' + item.name + '</h4>' +

						'</div>' +
						'<div class="giaban">' + '<p>' +
						formatPrice(item.newPrice) + '</p>';
					if (item.saleoff > 0) {
						categoryRow += '<div class="km-sp">' + item.saleoff + "%" + '</div>' +
							'<div class="giabandau">' +
							'<div>' + '<p>' + formatPrice(item.price) + '</p>' + '</div>' +
							'</div>';
					}

					listcategory.append(categoryRow);
				});
			},
			error: function (error) {
				console.log(error);
			}
		});
	});


	function formatPrice(price) {
		const formattedPrice = price.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ".");
		return formattedPrice + ' đ';
	}


	function ChiTietSanPham(id) {
		var url = "@Url.Action("ChiTietSanPham", "Home")?id=" + id;
		window.location.href = url;
	}

	/*product all*/
	$(document).ready(function () {
		$.ajax({
			url: '@Url.Action("DanhSachSanPham", "Home")',
			type: 'GET',
			success: function (data) {
				console.log(data);
				var listcategory = $("#listproduct");
				listcategory.empty();
				data.data.forEach(function (item) {
					var categoryRow =
						'<div class="testsp" onclick="ChiTietSanPham(' + item.id + ')">' +
						'<div class="product-image">' +
						'<div class="flashsale-image-container">' +
						'<img src="' + item.imgUrl + '">' +
						'</div>' +
						'</div>' +
						'<div class="ttsp">' +
						'<h4>' + item.name + '</h4>' +

						'</div>' +
						'<div class="giaban">' + '<p>' +
						formatPrice(item.newPrice) + '</p>';
					if (item.saleoff > 0) {
						categoryRow += '<div class="km-sp">' + item.saleoff + "%" + '</div>' +
							'<div class="giabandau">' +

							'<div>' + '<p>' + formatPrice(item.price) + '</p>' + '</div>' +
							'</div>';
					}
					listcategory.append(categoryRow);

				});
			},
			error: function (error) {
				console.log(error);
			}
		});
	});


</script>
